Инлайновой ассемблерной вставкой не получается переключить контекст,
хотя в ядре линукс >=4.x было примерно так и сделано (макрос плюс вызов функции)

Не хватает знаний и понимания, разобраться почему адрес возврата в ходе таких махинаций
куда-то пропадает, а если практически тоже самое сделать линковкой ассемблерной функции, то 
все зашибись... Чудесато в общем это...